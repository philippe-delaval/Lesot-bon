name: lesot-bon
type: laravel

build:
  commands:
    - npm ci
    - npm run build
  
runtime:
  node_version: 20
  
environments:
  production:
    build:
      env:
        NODE_ENV: production
        VITE_APP_NAME: "${APP_NAME}"
    
    deploy:
      - composer install --no-dev --optimize-autoloader
      - php artisan migrate --force
      - php artisan config:cache
      - php artisan route:cache
      - php artisan view:cache
      - php artisan optimize